
<!DOCTYPE html>
<html>
<head>

  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <meta charset="UTF-8" />
  <meta name="author" content="Wolfgang Pichler" />
  <link rel="canonical" href="http://www.wolfpil.de" />
  <meta name="robots" content="index" />
  <link rel="stylesheet" type="text/css" href="css/fluid.css" />

  <title>Scopbee 360 Cloud Edition</title>

  <!-- Latest compiled and minified CSS -->
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">-->

  <!-- Optional theme -->
  <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> -->

  <link rel="stylesheet" href="https://bootswatch.com/slate/bootstrap.min.css" />

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <style>
  #gmap {
    height: 100%;
  }

  .cam {
    width:150px;
  }

  #cam.transition {
    -moz-transition: all 1s ease;
    -webkit-transition: all 1s ease;
    -o-transition: all 1s ease;
    transition: all 1s ease;
  }

  #cam.rotate1 {
    -ms-transform: rotate(92deg); /* IE 9 */
    -webkit-transform: rotate(92deg); /* Chrome, Safari, Opera */
    transform: rotate(92deg);
  }

  #cam.rotate2 {
    -ms-transform: rotate(3deg); /* IE 9 */
    -webkit-transform: rotate(3deg); /* Chrome, Safari, Opera */
    transform: rotate(3deg);
  }

  #cam.rotate3 {
    -ms-transform: rotate(-85deg); /* IE 9 */
    -webkit-transform: rotate(-85deg); /* Chrome, Safari, Opera */
    transform: rotate(-85deg);
  }

  .video-wrapper {
    padding: 25px 0;
    background-color: #000000;
    margin-bottom: 20px;
  }

  #body-top {
    /*background: url(http://www.luckysurfandskate.com/images/desktops/lucky_map2.jpg) #fff;*/
    background-size: 20%;
    background-repeat: no-repeat;
    background-position: 80% -20px;
  }

  #uploader { margin-top: 150px; }
  #holder { width: 640px; min-height: 300px; margin: 50px auto; color: #888; }
  #holder h3 {
    font-family: 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;
    text-shadow: 0px 0px 2px #000;
    font-weight: 100;
    font-size: 22px;
  }
  #holder.hover { color: #fff; }
  #holder img { display: block; margin: 10px auto; }
  #holder p { margin: 10px; font-size: 14px; }
  progress { width: 100%; }
  progress:after { content: '%'; }
  .fail { background: #c00; padding: 2px; color: #fff; }
  .hidden { display: none !important;}

  .fade-animation {
    transition: opacity 2s ease-in-out;
    -moz-transition: opacity 2s ease-in-out;
    -webkit-transition: opacity 2s ease-in-out;
  }

  .img-reflect {
    -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(90%, transparent) , to(rgba(250, 250, 250, 0.3)));
  }

  </style>

</head>
<body>

<div id="body-top">


  <img src=../logo.png alt="" style="height:50px;padding-left:30px;padding-top:10px;float:left" />

  <div style="display:inline-block;width:150px;margin-left:20px;float:left;padding-top:10px">

    <span style="font-family: 'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif; color: #5e5e5e; font-size: 22px; font-weight: 100">
      Scopbee 360
    </span>
    <br/>
    <span style="display: inline-block; width: 130px; text-align: center; color: #fff; font-weight: 400; letter-spacing: 1px; background-color: #ddd; text-shadow: 1px 1px 1px #888; line-height: 16px; position:relative; left: -2px; top: -5px; border-radius: 2px">
      Cloud Edition
    </span>
  </div>

  <div style="display:inline-block;width:150px;float:right;margin-top:10px;color: #555; line-height: 180%;">

    <!--
    <div style="float:left;padding:5px;">
      <img src="img/cloud.png" alt="" style="width:50px;" />
    </div>
  -->

    <i class="fa fa-globe"></i>
    LOHAS CLUB
    <br/>

    <i class="fa fa-user"></i> Simon
  </div>

</div><!-- end body-top -->


<div id="wrapper" style="display: none;position:absolute; top:70px; left:0; width:100%; height:100%;">

  <div id="gmap"></div>

  <div id="leftpanel" class="container-fluid">

    <div style="padding: 15px 0; ">
      <i class="fa fa-map-marker"></i>
      大佳河濱公園
      Dajia River Park
    </div>

    <!-- Button trigger modal -->
    <button type="button" class="btn btn-success btn-block" data-toggle="modal" data-target="#myModal">
      <i class="fa fa-play"></i>
      Play Now
    </button>

    <div style="margin-top:20px">

      <!-- Nav tabs -->
      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
          <a href="#home" aria-controls="home" role="tab" data-toggle="tab" data-cam="1">
            <i class="fa fa-video-camera"></i>
            Cam 1
          </a>
        </li>
        <li role="presentation">
          <a href="#profile" aria-controls="profile" role="tab" data-toggle="tab" data-cam="2">
            <i class="fa fa-video-camera"></i>
            Cam 2
          </a>
        </li>
        <li role="presentation">
          <a href="#messages" aria-controls="messages" role="tab" data-toggle="tab" data-cam="3">
            <i class="fa fa-video-camera"></i>
            Cam 3
          </a>
        </li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        <div role="tabpanel" class="tab-pane text-center active" id="home">

          <!-- cam 1 -->

          <div class="video-wrapper">
            <video width="320" preload="metadata" autoplay loop>
              <source src="https://s3-ap-northeast-1.amazonaws.com/s3.scopbee.com/development/u/simon/20151017/cam1.ydl.mp4" type="video/mp4">
              Your browser does not support HTML5 video.
            </video>
          </div>

          <div class="well">
            Left / Cam 1 / 1080p / H.264
          </div>

        </div>
        <div role="tabpanel" class="tab-pane text-center" id="profile">

          <div class="video-wrapper">
            <video width="320" preload="metadata" autoplay loop>
              <source src="https://s3-ap-northeast-1.amazonaws.com/s3.scopbee.com/development/u/simon/20151017/cam2.ydl.mp4" type="video/mp4">
              Your browser does not support HTML5 video.
            </video>
          </div>

          <div class="well">
            Left / Cam 1 / 1080p / H.264
          </div>

        </div>
        <div role="tabpanel" class="tab-pane text-center" id="messages">

          <div class="video-wrapper">
            <video width="320" preload="metadata" autoplay loop>
              <source src="https://s3-ap-northeast-1.amazonaws.com/s3.scopbee.com/development/u/simon/20151017/cam3.ydl.mp4" type="video/mp4">
              Your browser does not support HTML5 video.
            </video>
          </div>

          <div class="well">
            Left / Cam 1 / 1080p / H.264
          </div>

        </div>
      </div>

      <div class="text-center">
        <img src="img/cam.png" alt="" id="cam" class="cam transition rotate" />
      </div>


    </div>

  </div>

  <div id="panel-foot">

    2015 &copy; Scopbee <a href="mailto:360@scopbee.com">360@scopbee.com</a>

  </div>

</div><!-- end allpanelCards, leftpanel, wrapper -->

<article id="uploader" class="container">

  <div class="well text-center">
    <div id="holder">
      <div style="padding-top: 80px">
        <i class="fa fa-cloud-upload fa-5x"></i>
        <h3>Drag and Drag Scopbee 360 Files Here</h3>
      </div>
    </div>
  </div>

  <p id="upload" class="hidden"><label>Drag &amp; drop not supported, but you can still upload via this input field:<br><input type="file"></label></p>
  <p id="filereader">File API &amp; FileReader API not supported</p>
  <p id="formdata">XHR2's FormData is not supported</p>
  <p id="progress">XHR2's upload progress isn't supported</p>

  <progress id="uploadprogress" min="0" max="100" value="0" style="opacity: 0">0</progress>

  <div class="progress">
    <div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
      0%
    </div>
  </div>

</article>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Scopbee 360 Video Player</h4>
      </div>
      <div class="modal-body">
        <video width="100%" autoplay loop>
          <source src="https://s3-ap-northeast-1.amazonaws.com/s3.scopbee.com/development/u/simon/20151017/flat.ydl.mp4" type="video/mp4">
          Your browser does not support HTML5 video.
        </video>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Done</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal 2 -->
<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Scopbee 360 Panorama Viewer</h4>
      </div>
      <div class="modal-body">
        <iframe src="pannellum.htm?panorama=storage/simon/20151017/flat.jpg&amp;autoLoad=true" frameborder="0" width="100%" height="300"></iframe>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Done</button>
      </div>
    </div>
  </div>
</div>

<!-- Latest compiled and minified JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDf9fwa9PSmom-UTGAsyzgfGN_-aNk8_ZI&amp;sensor=false&amp;libraries=places,geometry,visualization">
</script>

<script type="text/javascript">
var map;

function initialize() {
  var mapOptions = {
    zoom: 15,
    center: {lat: 25.076676, lng: 121.5551447},
    styles: [{"featureType":"landscape","stylers":[{"hue":"#FFBB00"},{"saturation":43.400000000000006},{"lightness":37.599999999999994},{"gamma":1}]},{"featureType":"road.highway","stylers":[{"hue":"#FFC200"},{"saturation":-61.8},{"lightness":45.599999999999994},{"gamma":1}]},{"featureType":"road.arterial","stylers":[{"hue":"#FF0300"},{"saturation":-100},{"lightness":51.19999999999999},{"gamma":1}]},{"featureType":"road.local","stylers":[{"hue":"#FF0300"},{"saturation":-100},{"lightness":52},{"gamma":1}]},{"featureType":"water","stylers":[{"hue":"#0078FF"},{"saturation":-13.200000000000003},{"lightness":2.4000000000000057},{"gamma":1}]},{"featureType":"poi","stylers":[{"hue":"#00FF6A"},{"saturation":-1.0989010989011234},{"lightness":11.200000000000017},{"gamma":1}]}],
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

  //    center: {lat: 25.077356, lng: 121.544441},

  map = new google.maps.Map(document.getElementById('gmap'),
      mapOptions);

  var kmlLayer1 = new google.maps.KmlLayer({
    url: 'https://s3-ap-northeast-1.amazonaws.com/s3.scopbee.com/development/u/simon/20151017/cam1.kml',
//    url: 'http://googlemaps.github.io/js-v2-samples/ggeoxml/cta.kml',
    map: map
  });

  var kmlLayer2 = new google.maps.KmlLayer({
    url: 'https://s3-ap-northeast-1.amazonaws.com/s3.scopbee.com/development/u/simon/20151017/cam2.kml',
//    url: 'http://googlemaps.github.io/js-v2-samples/ggeoxml/cta.kml',
    map: map
  });

  var kmlLayer3 = new google.maps.KmlLayer({
    url: 'https://s3-ap-northeast-1.amazonaws.com/s3.scopbee.com/development/u/simon/20151017/cam3.kml',
//    url: 'http://googlemaps.github.io/js-v2-samples/ggeoxml/cta.kml',
    map: map
  });

  var marker = new google.maps.Marker({
    position: {lat: 25.0772038, lng: 121.5455513},
    map: map,
    title: 'Hello World!'
  });

  var infowindow = new google.maps.InfoWindow({
     content: '<a href="#" data-toggle="modal" data-target="#myModal2"><img src="storage/simon/20151017/flat.jpg" style="width:300px" alt="" /></a>'
  });

  infowindow.open(map, marker);

  var marker2 = new google.maps.Marker({
    position: {lat: 25.0768038, lng: 121.5485513},
    map: map,
    title: 'Hello World!'
  });

  var infowindow2 = new google.maps.InfoWindow({
     content: '<p style="color:#333"><i class="fa fa-comment"></i> Wow, this is beautiful!</p>'
  });

  infowindow2.open(map, marker2);

  var bikeLayer = new google.maps.BicyclingLayer();
  bikeLayer.setMap(map);

  var kmlListener = function(kmlEvent) {
    console.log(kmlEvent.featureData);
  };

  google.maps.event.addListener(kmlLayer1, 'click', kmlListener);
  google.maps.event.addListener(kmlLayer2, 'click', kmlListener);
  google.maps.event.addListener(kmlLayer3, 'click', kmlListener);
}

//google.maps.event.addDomListener(window, 'load', initialize);

$(function() {
  $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    //e.target // newly activated tab
    //e.relatedTarget // previous active tab

    var camNo = $(e.target).data('cam');

    $('#cam').removeClass('rotate1 rotate2 rotate3').addClass('rotate' + camNo);

  });

  window.setTimeout(function () {
    $('#cam').addClass('rotate1');
  }, 500);
});


var holder = document.getElementById('holder'),
    tests = {
      filereader: typeof FileReader != 'undefined',
      dnd: 'draggable' in document.createElement('span'),
      formdata: !!window.FormData,
      progress: "upload" in new XMLHttpRequest
    },
    support = {
      filereader: document.getElementById('filereader'),
      formdata: document.getElementById('formdata'),
      progress: document.getElementById('progress')
    },
    acceptedTypes = {
      'image/png': true,
      'image/jpeg': true,
      'image/gif': true
    },
    progress = document.getElementById('uploadprogress'),
    fileupload = document.getElementById('upload');

"filereader formdata progress".split(' ').forEach(function (api) {
  if (tests[api] === false) {
    support[api].className = 'fail';
  } else {
    // FFS. I could have done el.hidden = true, but IE doesn't support
    // hidden, so I tried to create a polyfill that would extend the
    // Element.prototype, but then IE10 doesn't even give me access
    // to the Element object. Brilliant.
    support[api].className = 'hidden';
  }
});

$('#uploader').click(function() {
  $('#uploader').hide();
  $('#wrapper').show();

  //init google map
  initialize();
});

function previewfile(file) {
  if (tests.filereader === true && acceptedTypes[file.type] === true) {
    var reader = new FileReader();
    reader.onload = function (event) {
      /*
      var image = new Image();
      image.src = event.target.result;
      image.width = 250; // a fake resize
      holder.appendChild(image);
      */
      $('#holder').html('<img src="storage/simon/20151017/flat.jpg" style="width:500px;opacity:.1" class="img-rounded fade-animation img-reflect" alt="" /><br/><button class="btn btn-lg btn-success" style="display:none">Next <i class="fa fa-chevron-right"></i></button>');

      var currValue = 0;

      var makeProgress = function(){
        currValue += Math.round(Math.random() * 5);

        if (currValue > 100) {
          currValue = 100;
        }

        $('#holder img').css('opacity', currValue / 100);
        $('.progress-bar').css('width', currValue + '%');
        $('.progress-bar').text(currValue + '%');

        if (currValue < 100) {
          window.setTimeout(makeProgress, 250);
        }
        else {
            $('#holder button').show();
            $('#holder button').click(function() {
              $('#holder').html('<h3>Scopbee 360 Group Found Successful</h3><div class="row"><div class="col-xs-4"><img src="storage/simon/20151017/cam1.h264.mp4.jpg" class="img-thumbnail" alt="" /></div><div class="col-xs-4"><img src="storage/simon/20151017/cam2.h264.mp4.jpg" class="img-thumbnail" alt="" /></div><div class="col-xs-4"><img src="storage/simon/20151017/cam3.h264.mp4.jpg" class="img-thumbnail" alt="" /></div></div><br/><br/><br/><br/><br/><button class="btn btn-lg btn-success">Done <i class="fa fa-chevron-right"></i></button>');
            });

            $('#holder button').click(function() {
              $('#uploader').hide();
              $('#wrapper').show();

              //init google map
              initialize();
            });
        }
      };

      window.setTimeout(makeProgress, 250);

    };

    reader.readAsDataURL(file);
  }  else {
    holder.innerHTML += '<p>Uploaded ' + file.name + ' ' + (file.size ? (file.size/1024|0) + 'K' : '');
    console.log(file);
  }
}

function readfiles(files) {
    debugger;
    var formData = tests.formdata ? new FormData() : null;
    for (var i = 0; i < files.length; i++) {
      if (tests.formdata) formData.append('file', files[i]);
      previewfile(files[i]);
    }

    // now post a new XHR request
    if (tests.formdata) {
      var xhr = new XMLHttpRequest();
      xhr.open('POST', '/devnull.php');
      xhr.onload = function() {
        progress.value = progress.innerHTML = 100;
      };

      if (tests.progress) {
        xhr.upload.onprogress = function (event) {
          if (event.lengthComputable) {
            var complete = (event.loaded / event.total * 100 | 0);
            progress.value = progress.innerHTML = complete;
          }
        }
      }

      xhr.send(formData);
    }
}

if (tests.dnd) {
  holder.ondragover = function () { this.className = 'hover'; return false; };
  holder.ondragend = function () { this.className = ''; return false; };
  holder.ondrop = function (e) {
    this.className = '';
    e.preventDefault();
    readfiles(e.dataTransfer.files);
  }
} else {
  fileupload.className = 'hidden';
  fileupload.querySelector('input').onchange = function () {
    readfiles(this.files);
  };
}
</script>
</body>
</html>
